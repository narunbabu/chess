/* .lobby-container {
  padding: 2rem 1rem;
  max-width: 100vw;
  width: 100%;
  max-width: 1200px;
  margin: 2rem auto;
  background: #262421;
  border: 1px solid #3d3a37;
  border-radius: 16px;
  color: #ffffff;
  box-shadow: 0 4px 30px rgba(0,0,0,0.4);
  overflow-y: auto;
  overflow-x: hidden;
  box-sizing: border-box;
  height: auto;
} */
.lobby-container {
  padding: 1rem;
  width: 100%;
  max-width: 1440px;
  margin: 0 auto;               /* ensure centered */
  background: #262421;
  -webkit-backdrop-filter: blur(12px);
  backdrop-filter: blur(12px);
  border: 1px solid #3d3a37;
  border-radius: 16px;
  color: #ffffff;
  box-shadow: 0 4px 30px rgba(0,0,0,0.4);
  /* overflow: visible — container is height:auto so no scroll needed;
     removing overflow-y:auto prevents the Safari stacking-context bug
     where backdrop-filter + overflow:auto can swallow child z-index */
  overflow: visible;
  box-sizing: border-box;
  height: auto;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
}
.lobby {
  max-width: 100%;
  box-sizing: border-box;
  overflow-x: hidden;
  margin: 0 auto;
}


.loading-spinner {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 200px;
}

.lobby-topbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #1a1a18;
  backdrop-filter: blur(10px);
  padding: 0.75rem 1rem;
  border-bottom: 1px solid #3d3a37;
  border-radius: 12px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.3);
  margin-bottom: 1rem;
}

.logo-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.logo-title .logo {
  height: 32px;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
}

.logo-title h1 {
  color: #81b64c;
  font-size: 1.5rem;
  margin: 0;
  text-shadow: 0 2px 4px rgba(0,0,0,0.3);
}

.user-compact {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  position: relative;
}

.user-name {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  color: #bababa;
}

.user-name span {
  font-weight: 600;
  font-size: 0.95rem;
}

.user-name small {
  color: #8b8987;
  font-size: 0.8rem;
  font-weight: 500;
}

.user-avatar {
  position: relative;
  cursor: pointer;
}

.user-avatar img {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 2px solid #81b64c;
  cursor: pointer;
  transition: transform .2s, border-color .2s;
}

.user-avatar img:hover {
  transform: scale(1.05);
  border-color: #a3d160;
}

.dropdown-menu {
  display: none;
  position: absolute;
  top: 120%;
  right: 0;
  background: #1a1a18;
  border: 1px solid #3d3a37;
  border-radius: 10px;
  overflow: hidden;
  z-index: 999;
  min-width: 150px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.5);
}

.dropdown-menu.show {
  display: block;
}

.dropdown-menu button {
  display: block;
  background: none;
  border: none;
  color: #fff;
  width: 100%;
  padding: 0.6rem 1rem;
  text-align: left;
  font-size: 0.9rem;
  transition: background .2s;
  cursor: pointer;
}

.dropdown-menu button:hover {
  background: #3d3a37;
}

.dropdown-menu button.logout-btn {
  color: #e74c3c;
  border-top: 1px solid #3d3a37;
}

.dropdown-menu button.logout-btn:hover {
  background: rgba(231, 76, 60, 0.15);
}

.stats-row {
  display: flex;
  justify-content: center;
  gap: 1.25rem;
  margin: 1rem 0 1.5rem;
  flex-wrap: wrap;
}

.stat-tile {
  background: #312e2b;
  border: 1px solid #3d3a37;
  padding: 0.6rem 1.2rem;
  border-radius: 10px;
  display: flex;
  align-items: center;
  gap: 0.4rem;
  color: #bababa;
  font-size: 0.95rem;
  font-weight: 600;
  transition: transform .2s, background .2s;
}

.stat-tile:hover {
  transform: translateY(-2px);
  background: #3d3a37;
}

.stat-icon {
  font-size: 1.2rem;
}

.stat-number {
  color: #43b581;
  font-weight: 700;
  font-size: 1rem;
}

.stat-label {
  color: #8b8987;
  font-weight: 500;
}

.lobby-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid #3d3a37;
}

/* Add mobile sticky header */
@media (max-width: 768px) {
  .lobby-topbar {
    position: sticky;
    top: 0;
    z-index: 50;
  }
}

/* Update lobby container for better mobile experience */
@media (max-width: 768px) {
  .lobby-container {
    padding: 1rem 0.5rem;
    margin: 1rem auto;
  }
}

.lobby-header .nav-buttons {
  display: flex;
  gap: 1rem;
}

.lobby-header .nav-buttons button {
  background: transparent;
  border: 1px solid #4a4744;
  border-radius: 6px;
  padding: 0.4rem 0.9rem;
  color: #bababa;
  font-weight: 500;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.lobby-header .nav-buttons button:hover {
  background: #3d3a37;
  border-color: #5c5a57;
  transform: translateY(-1px);
  color: #ffffff;
}

.user-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 2rem;
}

/* Legacy styles - no longer used but kept for backward compatibility */
.current-user {
  display: flex;
  align-items: center;
  background: #312e2b;
  backdrop-filter: blur(8px);
  border: 1px solid rgba(129, 182, 76, 0.3);
  padding: 1rem;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.current-user-avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  margin-right: 1rem;
  border: 3px solid #81b64c;
}

.current-user-details h3 {
  margin: 0 0 0.25rem 0;
  color: #81b64c;
  font-size: 1.2rem;
}

.user-email, .user-rating {
  margin: 0.2rem 0;
  color: #8b8987;
  font-size: 0.9rem;
}

.online-stats {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 1rem;
}

.stat {
  background: #312e2b;
  border: 1px solid #3d3a37;
  border-radius: 10px;
  padding: 0.75rem 1.25rem;
  text-align: center;
  min-width: 110px;
  transition: transform 0.25s ease;
}

.stat:hover {
  transform: translateY(-3px);
  box-shadow: 0 4px 12px rgba(129, 182, 76, 0.2);
}

.stat-number {
  font-size: 1.75rem;
  font-weight: 700;
  color: #43b581;
  display: block;
  margin-bottom: 0.25rem;
}

.stat-label {
  font-size: 0.75rem;
  text-transform: uppercase;
  color: #8b8987;
  letter-spacing: 0.05em;
}

.available-players-section {
  margin-top: 2rem;
}

.available-players-section h2 {
  color: #81b64c;
  margin-bottom: 1rem;
  font-size: 1.5rem;
}

.player-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 1.5rem;
  margin-top: 1rem;
}

.player-card {
  display: flex;
  align-items: center;
  background: #312e2b;
  border: 1px solid #3d3a37;
  padding: 1.5rem;
  border-radius: 12px;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  animation: fadeInUp 0.4s ease-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.player-card:hover {
  transform: translateY(-3px);
  border-color: rgba(129, 182, 76, 0.5);
  box-shadow: 0 8px 25px rgba(129, 182, 76, 0.15);
  background: #3d3a37;
}

.player-avatar {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  margin-right: 1rem;
  border: 2px solid #81b64c;
}

.player-info {
  flex: 1;
  overflow: hidden;
  min-width: 0;
}

.player-info h3 {
  margin: 0 0 0.25rem 0;
  font-size: 1.1rem;
  color: #ffffff;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.player-email {
  margin: 0.2rem 0;
  color: #8b8987;
  font-size: 0.85rem;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.player-rating {
  margin: 0.2rem 0;
  color: #43b581;
  font-size: 0.9rem;
  font-weight: 600;
}

.player-status {
  margin: 0.2rem 0;
  color: #43b581;
  font-size: 0.8rem;
  font-weight: 500;
}

.no-players {
  text-align: center;
  padding: 3rem;
  color: #8b8987;
  grid-column: 1 / -1;
}

.no-players p {
  margin: 0.5rem 0;
  font-size: 1.1rem;
}

.invite-btn {
  margin-left: auto;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 8px;
  background: linear-gradient(135deg, #81b64c, #769656);
  color: white;
  cursor: pointer;
  font-weight: 600;
  font-size: 0.9rem;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(129, 182, 76, 0.3);
}

.invite-btn:hover {
  background: linear-gradient(135deg, #a3d160, #81b64c);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(129, 182, 76, 0.4);
}

.invite-btn:active {
  transform: translateY(0);
}

.invite-btn.invited {
  background: #72767d;
  cursor: not-allowed;
  opacity: 0.7;
}

.invite-btn.invited:hover {
  background: #72767d;
  transform: none;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.invitation-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000000; /* Must exceed header (999997) and nav panel (999999) */
}

.modal-content {
  background-color: #312e2b;
  padding: 2rem;
  border-radius: 8px;
  text-align: center;
  border: 1px solid #3d3a37;
  color: #ffffff;
}

.loader {
  border: 4px solid #3d3a37;
  border-top: 4px solid #81b64c;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 1s linear infinite;
  margin: 1rem auto;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Responsive Design */
@media (max-width: 768px) {
  .lobby-container {
    margin: 0.5rem auto !important;
    padding: 0.5rem 0.75rem;
    height: auto;
    min-height: auto;
    overflow-y: visible;
    width: 100% !important;
    max-width: 100% !important;
    left: 0 !important;
    right: 0 !important;
    position: relative !important;
    /* Prevent shrink-wrapping */
    flex: 0 0 100% !important;
    /* Force centering */
    margin-left: auto !important;
    margin-right: auto !important;
  }

  .lobby-header {
    flex-direction: column;
    gap: 1rem;
    text-align: center;
  }

  .lobby-header h1 {
    font-size: 2rem;
  }

  .lobby-header .nav-buttons {
    justify-content: center;
    flex-wrap: wrap;
  }

  .user-info {
    flex-direction: column;
    align-items: stretch;
    gap: 1rem;
  }

  .current-user {
    flex-direction: column;
    text-align: center;
  }

  .current-user-avatar {
    margin: 0 0 1rem 0;
  }

  .online-stats {
    flex-direction: column;
    align-items: center;
  }

  .lobby-tabs {
    gap: 0.25rem;
  }

  .tab-button {
    padding: 0.5rem 0.9rem;
    font-size: 0.9rem;
  }

  .player-list {
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  .player-card {
    padding: 1rem;
  }

  .player-avatar {
    width: 48px;
    height: 48px;
  }

  .invite-btn {
    padding: 0.5rem 1rem;
    font-size: 0.8rem;
  }
}

@media (max-width: 480px) {
  .lobby-container {
    margin: 0.25rem auto !important;
    padding: 0.4rem 0.5rem;
    height: auto;
    min-height: auto;
    overflow-y: visible;
    width: 100% !important;
    max-width: 100% !important;
    left: 0 !important;
    right: 0 !important;
    position: relative !important;
    /* Prevent shrink-wrapping */
    flex: 0 0 100% !important;
    /* Force centering */
    margin-left: auto !important;
    margin-right: auto !important;
  }

  .lobby-header {
    padding: 1rem 0;
  }

  .lobby-header h1 {
    font-size: 1.5rem;
  }

  .lobby-header .nav-buttons {
    gap: 0.5rem;
  }

  .lobby-header .nav-buttons button {
    padding: 0.3rem 0.7rem;
    font-size: 0.8rem;
  }

  .stat {
    min-width: 90px;
    padding: 0.6rem 1rem;
  }

  .stat-number {
    font-size: 1.5rem;
  }

  .stat-label {
    font-size: 0.7rem;
  }

  .available-players-section h2 {
    font-size: 1.25rem;
  }

  .tab-button {
    padding: 0.4rem 0.7rem;
    font-size: 0.85rem;
  }

  /* Improve text wrapping on very small screens */
  .player-info h3,
  .invitation-info h4 {
    font-size: 1rem;
  }

  .player-email,
  .invitation-info p {
    font-size: 0.8rem;
  }
}

/* Invitation Sections */
.invitations-section {
  margin: 2rem 0;
  padding: 1.5rem;
  background: #1a1a18;
  border: 1px solid rgba(129, 182, 76, 0.3);
  border-radius: 12px;
}

.invitations-section h2 {
  color: #81b64c;
  margin-bottom: 1rem;
  font-size: 1.5rem;
}

.invitations-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.invitation-card {
  display: flex;
  align-items: center;
  background: #312e2b;
  border: 1px solid #3d3a37;
  padding: 1rem;
  border-radius: 10px;
  transition: all 0.3s ease;
  animation: slideIn 0.3s ease-out;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.invitation-card:hover {
  transform: translateY(-3px);
  border-color: rgba(129, 182, 76, 0.5);
  box-shadow: 0 8px 25px rgba(129, 182, 76, 0.15);
  background: #3d3a37;
}

.invitation-avatar {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  margin-right: 1rem;
  border: 2px solid #81b64c;
}

.invitation-info {
  flex: 1;
  overflow: hidden;
  min-width: 0;
}

.invitation-info h4 {
  margin: 0 0 0.5rem 0;
  color: #ffffff;
  font-size: 1.1rem;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.invitation-info p {
  margin: 0.2rem 0;
  color: #8b8987;
  font-size: 0.9rem;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.invitation-time {
  color: #5c5a57 !important;
  font-size: 0.8rem !important;
  font-style: italic;
}

.invitation-actions {
  display: flex;
  gap: 0.5rem;
}

.accept-btn, .decline-btn, .cancel-btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-weight: 600;
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.accept-btn {
  background-color: #43b581;
  color: white;
}

.accept-btn:hover {
  background-color: #3ca374;
  transform: translateY(-1px);
}

.decline-btn {
  background-color: #f04747;
  color: white;
}

.decline-btn:hover {
  background-color: #d73c3c;
  transform: translateY(-1px);
}

.cancel-btn {
  background-color: #72767d;
  color: white;
}

.cancel-btn:hover {
  background-color: #5f6368;
  transform: translateY(-1px);
}

/* Mobile responsiveness for invitations */
@media (max-width: 768px) {
  .invitations-section {
    margin: 1rem 0;
    padding: 1rem;
  }

  .invitation-card {
    flex-direction: column;
    text-align: center;
    gap: 1rem;
  }

  .invitation-avatar {
    margin: 0;
  }



.invitation-actions {

  justify-content: center;

  width: 100%;

}



.accept-btn, .decline-btn, .cancel-btn {

  flex: 1;

  min-width: 80px;

}

}



/* --- Prevent tab children from expanding the container --- */
.lobby-container {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;               /* ensure centered */
  box-sizing: border-box;
  overflow-x: visible;         /* keep visible, children constrained instead */
}

/* Tab strip: keep it scrollable but never force outer width */
.lobby-tabs {
  display: flex;
  gap: 0.4rem;
  padding-inline: 1rem;        /* reserve horizontal padding so active tab won't push edges */
  margin: 0.2rem 0 1.25rem;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  box-sizing: border-box;
  min-width: 0;                /* allow flex items to shrink properly */
  scroll-snap-type: x proximity;
  border-bottom: 1px solid #3d3a37;
  cursor: grab;                /* indicate scrollability */
}

/* Ensure each tab button can't grow beyond the tab area (prevents layout shift) */
.lobby-tabs .tab-button {
  flex: 0 0 auto;              /* don't shrink to zero; don't grow */
  min-width: 0;                /* allow content to wrap/truncate */
  box-sizing: border-box;
}

/* Badge flows inline with tab text */

/* Constrain active games list / cards to container width */
.lobby-content,
.lobby-content * {
  max-width: 100%;
  box-sizing: border-box;
}

/* If ActiveGamesList uses card images, ensure they don't overflow */
.lobby-content img,
.lobby-content svg {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Optional: prevent any child from accidentally causing horizontal scroll */
.lobby {
  overflow-x: hidden;
}

/* Hide scrollbars visually (still scrollable using touch) */
.lobby-tabs::-webkit-scrollbar {
  display: none;
}

.lobby-tabs:active {
  cursor: grabbing;                  /* active scrolling state */
}

.lobby-tabs::-webkit-scrollbar {
  display: none;
}

/* subtle left/right edge fades to signal scrollability */
.lobby-tabs::before,
.lobby-tabs::after {
  display: none;
}

/* Tab button */
.tab-button {
  flex: 0 0 auto;                     /* don't shrink */
  white-space: nowrap;
  padding: 0.6rem 1rem;
  font-size: 1rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  color: #8b8987;
  background: #1a1a18;
  border: 1px solid #3d3a37;
  border-bottom: none;                /* sits above the bottom divider */
  border-radius: 10px 10px 0 0;
  scroll-snap-align: start;
  transition: transform 0.2s ease, background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  min-height: 44px;                  /* touch target minimum */
  position: relative;
  padding-right: 1rem;
}

/* Icon and text styles */
.tab-ico {
  display: none;
  margin-right: 0.35rem;
  font-size: 1.05rem;
}

.tab-text-full {
  display: inline;
}

.tab-text-short {
  display: none;
}

/* Ensure only one text variant is visible at any time */
.tab-ico:not(:empty) ~ .tab-text-full {
  display: none;
}

.tab-ico:not(:empty) ~ .tab-text-short {
  display: inline;
}

.tab-button:hover {
  background: #3d3a37;
  color: #ffffff;
}

.tab-button.active {
  color: #fff;
  background: rgba(129, 182, 76, 0.18);
  border-color: rgba(129, 182, 76, 0.45);
  box-shadow: 0 6px 14px rgba(129, 182, 76, 0.22);
}

/* Tab badge pills */
.tab-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 22px;
  padding: 0 0.45rem;
  height: 20px;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 700;
  line-height: 1;
  color: #0b1220;
  background: #fbbf24;                 /* amber */
  box-shadow: 0 2px 6px rgba(251,191,36,0.45);
  margin-left: 0.35rem;
  flex-shrink: 0;
}

.tab-button.active .tab-badge {
  background: #22c55e;                 /* green when active */
  color: #071118;
  box-shadow: 0 2px 8px rgba(34,197,94,0.45);
}

/* Responsive label rules */
@media (max-width: 520px) {
  /* compress long labels to short form */
  .tab-text-full {
    display: none;
  }
  .tab-text-short {
    display: inline;
  }
  .tab-ico {
    display: inline;
  }
}

@media (max-width: 380px) {
  /* icon-only; text hidden, badge stays */
  .tab-text-short,
  .tab-text-full {
    display: none;
  }
  .tab-ico {
    display: inline;
    margin-right: 0;
  }
  .tab-button {
    padding-right: 0.7rem;
  }
}

/* Width constraints and ellipsis for safety */
.tab-button {
  max-width: 42vw;                  /* prevent one tab from hogging the row */
}

.tab-text-full,
.tab-text-short {
  display: inline-block;
  max-width: 24ch;                  /* reasonable limit */
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

/* Badge positioned inline via margin-left in main rule above */

/* Make the active tab gently pop on very small screens */
@media (max-width: 480px) {
  .tab-button {
    padding: 0.5rem 0.9rem;
    font-size: 0.95rem;
  }
}

/* Fallback for extremely narrow screens */
@media (max-width: 340px) {
  .lobby-tabs {
    display: none;
  }
}

.lobby-tabs-select {
  width: 100%;
  padding: 0.6rem 0.8rem;
  background: #1a1a18;
  color: #bababa;
  border: 1px solid #3d3a37;
  border-radius: 10px;
  font-size: 1rem;
  font-weight: 600;
  margin: 0.5rem 0 1.25rem;
  cursor: pointer;
}

.lobby-tabs-select option {
  background: #262421;
  color: #bababa;
  padding: 0.5rem;
}



.lobby-content {
  padding-top: 1rem;
  max-width: 100%;
  margin-top: 1rem;
}

/* Refresh button spinner animation */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.refresh-button:hover:not(:disabled) {
  transform: scale(1.05);
}

.refresh-button:disabled {
  cursor: not-allowed;
}

/* ── Hero Section: Play Online ───────────────────────── */
.lobby-hero {
  text-align: center;
  padding: 1.5rem 1rem;
  margin-bottom: 1rem;
  background: linear-gradient(135deg, rgba(129,182,76,0.12) 0%, rgba(129,182,76,0.04) 100%);
  border: 1px solid rgba(129,182,76,0.25);
  border-radius: 12px;
}

.lobby-hero-btn {
  display: inline-block;
  padding: 14px 48px;
  font-size: 1.25rem;
  font-weight: 700;
  color: #fff;
  background: linear-gradient(135deg, #81b64c, #6a9a3e);
  border: none;
  border-radius: 12px;
  cursor: pointer;
  box-shadow: 0 4px 16px rgba(129,182,76,0.35);
  transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
  letter-spacing: 0.02em;
}

.lobby-hero-btn:hover {
  transform: translateY(-2px) !important; /* override global button:hover:not(:disabled) specificity (0,2,1 vs 0,2,0) */
  box-shadow: 0 6px 24px rgba(129,182,76,0.45);
  background: linear-gradient(135deg, #93c860, #81b64c) !important;
  background-color: transparent !important; /* prevent global orange #FF7C2A bleed-through */
  border-color: transparent !important;
}

.lobby-hero-btn:active {
  transform: translateY(0);
}

.lobby-hero-subtitle {
  margin: 0.75rem 0 0;
  color: #8b8987;
  font-size: 0.95rem;
}

/* ── AI description ───────────────────────────────────── */
.lobby-ai-description {
  color: #8b8987;
  font-size: 0.9rem;
  margin: 0 0 1rem;
}

/* ── Bot card extras ─────────────────────────────────── */
.bot-meta {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  margin: 4px 0;
}

.bot-personality-badge {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 9999px;
  font-size: 0.7rem;
  font-weight: 700;
  color: #fff;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.bot-tier-badge {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 9999px;
  font-size: 0.7rem;
  font-weight: 700;
  color: #fff;
  background: #4a4744;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.bot-stats {
  margin: 2px 0 0;
  color: #6b6966;
  font-size: 0.75rem;
}

/* ── Friend Search ───────────────────────────────────── */
.friend-search {
  margin-bottom: 1rem;
}

.friend-search-input-wrapper {
  position: relative;
  display: flex;
  align-items: center;
}

.friend-search-icon {
  position: absolute;
  left: 12px;
  font-size: 1rem;
  pointer-events: none;
}

.friend-search-input {
  width: 100%;
  padding: 10px 12px 10px 36px;
  background: #1a1a18;
  border: 1px solid #3d3a37;
  border-radius: 10px;
  color: #fff;
  font-size: 0.95rem;
  outline: none;
  transition: border-color 0.2s;
}

.friend-search-input:focus {
  border-color: rgba(129,182,76,0.5);
}

.friend-search-input::placeholder {
  color: #6b6966;
}

.friend-search-spinner {
  position: absolute;
  right: 12px;
  animation: spin 1s linear infinite;
  display: inline-block;
  font-size: 1.1rem;
  color: #81b64c;
}

.friend-search-results {
  margin-top: 8px;
}

.friend-search-empty {
  color: #6b6966;
  font-size: 0.85rem;
  text-align: center;
  margin-top: 8px;
}

/* ── Matchmaking Overlay ─────────────────────────────── */
.matchmaking-overlay {
  position: fixed;
  top: 0; right: 0; bottom: 0; left: 0; /* fallback for Safari < 14.1 */
  inset: 0;
  /* Slightly darker background instead of backdrop-filter:
     backdrop-filter on a position:fixed element can create a compositing
     layer that traps it within an ancestor stacking context in Safari,
     causing the overlay to be clipped rather than covering the full viewport.
     The opaque background provides sufficient visual separation. */
  background: rgba(0,0,0,0.82);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000001; /* Must exceed header (999997) and nav panel (999999) */
}

.matchmaking-modal {
  background: #262421;
  border: 1px solid #3d3a37;
  border-radius: 16px;
  padding: 2.5rem 2rem;
  width: 90%;
  max-width: 400px;
  text-align: center;
  box-shadow: 0 12px 40px rgba(0,0,0,0.6);
  animation: fadeInUp 0.3s ease-out;
}

.matchmaking-spinner {
  margin-bottom: 1rem;
}

.chess-piece-spin {
  font-size: 3rem;
  display: inline-block;
  animation: spin 3s linear infinite;
}

.matchmaking-title {
  color: #fff;
  font-size: 1.4rem;
  font-weight: 700;
  margin: 0 0 0.5rem;
}

.matchmaking-subtitle {
  color: #8b8987;
  font-size: 0.9rem;
  margin: 0 0 1.25rem;
}

.matchmaking-progress-bar {
  width: 100%;
  height: 6px;
  background: #3d3a37;
  border-radius: 3px;
  overflow: hidden;
  margin-bottom: 0.5rem;
}

.matchmaking-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #81b64c, #a3d160);
  border-radius: 3px;
  transition: width 0.3s ease;
}

.matchmaking-timer {
  color: #bababa;
  font-size: 0.85rem;
  font-weight: 600;
  margin: 0 0 0.25rem;
}

.matchmaking-hint {
  color: #6b6966;
  font-size: 0.8rem;
  margin: 0 0 1.25rem;
}

.matchmaking-cancel-btn {
  padding: 10px 32px;
  background: #4a4744;
  border: 1px solid #5c5a57;
  border-radius: 8px;
  color: #bababa;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}

.matchmaking-cancel-btn:hover {
  background: #5c5a57;
  color: #fff;
}

.matchmaking-matched-icon {
  font-size: 3rem;
  margin-bottom: 0.75rem;
  animation: fadeInUp 0.3s ease-out;
}

.matchmaking-opponent-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  background: #312e2b;
  border: 1px solid rgba(129,182,76,0.3);
  border-radius: 12px;
  padding: 1rem;
  margin: 1rem 0;
  text-align: left;
}

.matchmaking-opponent-avatar {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: 2px solid #81b64c;
}

.matchmaking-opponent-info h3 {
  color: #fff;
  margin: 0 0 4px;
  font-size: 1.1rem;
}

.matchmaking-opponent-info p {
  color: #8b8987;
  margin: 0;
  font-size: 0.85rem;
}

.matchmaking-personality-badge {
  display: inline-block;
  margin-top: 4px;
  padding: 2px 8px;
  border-radius: 9999px;
  font-size: 0.7rem;
  font-weight: 700;
  color: #fff;
  background: #81b64c;
  text-transform: uppercase;
}

.matchmaking-starting {
  color: #81b64c;
  font-weight: 600;
  animation: pulse 1.2s ease-in-out infinite;
}

.matchmaking-error-icon {
  font-size: 3rem;
  margin-bottom: 0.75rem;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* ── Mobile adjustments for hero and matchmaking ──── */
@media (max-width: 480px) {
  .lobby-hero {
    padding: 1rem 0.75rem;
  }

  .lobby-hero-btn {
    padding: 12px 36px;
    font-size: 1.1rem;
  }

  .matchmaking-modal {
    padding: 2rem 1.25rem;
    width: 95%;
  }
}
